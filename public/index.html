<!DOCTYPE html>
<html>
   <head>
      <title>Note Pad Alpha</title>
      <meta charset="utf-8"/>   

      <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
      <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
      <link rel='stylesheet' href="https://fonts.googleapis.com/icon?family=Material+Icons">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
      <script src="https://cdn.firebase.com/js/client/2.4.1/firebase.js"></script>
  </head>

<body>
   <nav class="indigo darken-4">
    	<div>
      		<a href="classroomSample.html" class="brand-logo">&nbsp&nbsp NOTEPAD ALPHA</a>
	    </div>
	</nav>

    <div class="row">
     <div class="col s12 m4 12">
      <div class="card indigo darken-4">
       <div class="card-content white-text">
        <div class="row margin">
         <div class="input-field col s12">
           <input type="text" id="noteTitle" placeholder="Note Title">
<!--	    <input type="text" id="noteTask" placeholder="Note Description">-->
	   <input type="text" id="completion" placeholder="Completed(YES or NO)">
	<!--  <input type="submit" id='submitButton'>-->
         </div>
        </div>
       </div>
      </div>
     </div>
    </div>

	<table class="centered" id="summary">
    	<thead>
          <tr>
              <th>Note Title</th>
<!--              <th>Note Description</th>-->
              <th>Status</th>
          </tr>
        </thead>
        <tbody>
        
        </tbody>
    </table>

	<script>
var myDataRef = new Firebase('https://teard6qpmrk.firebaseio-demo.com/');
      $('#completedInput').keypress(function (e) {//when the user completed all the input field and pressed enter
        if (e.keyCode == 13) {
          var name = $('#noteTitle').val();//get the name of the task
          var completed = $('#completion').val();//get the info if the task is completed or not
          myDataRef.push({name: name, completed: completed});//push the data to the firebase
          $('#completion').val('');
          $('#noteTitle').val('');
        }
      });
      myDataRef.on('child_added', function(snapshot) {//function when a new task is added
        var task = snapshot.val();
        displayTasks(task.name, task.completed);//calls the function that displays all the tasks
      });
      function displayTasks(name, completed) {//function for displaying all the tasks by adding new row with the info of each task to the table
      		var newRow = $("<tr/>");
			newRow.append($("<td/>").append($("<em/>").text(name)));
			if(completed=="yes"){
				newRow.append($("<td/>").append("TASK DONE"));
			}
			else{
				newRow.append($("<td/>").append("TASK TO BE DONE"));
			}
			$("#summary").append(newRow);
      };
	</script>

</body>
</html>
